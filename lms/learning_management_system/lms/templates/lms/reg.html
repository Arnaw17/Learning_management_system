{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register - LearnCode</title>
<link rel="stylesheet" href="{% static 'css/reg.css' %}">
</head>
<body>

<div class="container">
  <h2>Create Your Account</h2>
  {% if messages %}
    <div class="messages">
      {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
  <form id="registerForm" method="post" action="{% url 'student_register' %}">
    {% csrf_token %}
    {% if form %}
      {{ form.non_field_errors }}
      {{ form.as_p }}
    {% else %}
      <div class="input-group">
        <label>First Name</label>
        <input type="text" name="first_name" placeholder="Enter first name" required>
      </div>
      <div class="input-group">
        <label>Last Name</label>
        <input type="text" name="last_name" placeholder="Enter last name" required>
      </div>
      <div class="input-group">
        <label>Email</label>
        <input type="email" name="email" placeholder="example@gmail.com" required>
      </div>
      <div class="input-group">
        <label>Password</label>
        <input type="password" name="password" placeholder="Set a password" required minlength="6">
      </div>
      <div class="input-group">
        <label>Contact Number</label>
        <input type="tel" name="contact" placeholder="e.g. 9876543210" pattern="[6-9]{1}[0-9]{9}" required>
      </div>
      <div class="input-group">
        <label>Date of Birth</label>
        <input type="date" name="dob" required>
      </div>
    {% endif %}
    <button type="submit" class="btn">Register</button>
  </form>
  <script>
    // Disable the submit button on first click to avoid double submissions
    (function(){
      const form = document.getElementById('registerForm');
      if (!form) return;
      const btn = form.querySelector('button[type="submit"]');
      form.addEventListener('submit', function(e){
        if (btn) {
          btn.disabled = true;
          btn.textContent = 'Registering...';
        }
      }, {once: true});
    })();
  </script>
  <div class="links">
    <p>Already have an account? <a href="{% url 'student_login' %}">Login</a></p>
    <p><a href="{% url 'home' %}">Back to Home</a></p>
  </div>
</div>

</body>
</html>
